<template><div><h1 id="_3-3-字符串模式匹配" tabindex="-1"><a class="header-anchor" href="#_3-3-字符串模式匹配" aria-hidden="true">#</a> 3.3 字符串模式匹配</h1>
<p><code v-pre>字符串模式匹配</code>：在<code v-pre>主串</code>中找到与<code v-pre>模式串</code>相同的子串,并返回其所在位置。</p>
<p><code v-pre>子串</code>：一定能在主串中找到的串</p>
<p><code v-pre>模式串</code>：不一定能在主串中找到的串</p>
<p>方法：<code v-pre>朴素模式匹配算法</code>和<code v-pre>KMP算法</code></p>
<h2 id="_3-3-1-朴素模式匹配算法" tabindex="-1"><a class="header-anchor" href="#_3-3-1-朴素模式匹配算法" aria-hidden="true">#</a> 3.3.1 朴素模式匹配算法</h2>
<h3 id="用串的定位操作" tabindex="-1"><a class="header-anchor" href="#用串的定位操作" aria-hidden="true">#</a> 用串的定位操作：</h3>
<p>方法：在S中依次按顺序取m长子串，判断是否与T相同</p>
<div class="language-c line-numbers-mode" data-ext="c"><pre v-pre class="language-c"><code><span class="token comment">//定位操作</span>
<span class="token keyword">int</span> <span class="token function">Index</span><span class="token punctuation">(</span>SString S<span class="token punctuation">,</span>SString T<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token function">StrLength</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">,</span> m <span class="token operator">=</span> <span class="token function">StrLength</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>
    SString sub<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> n<span class="token operator">-</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">SubString</span><span class="token punctuation">(</span>sub<span class="token punctuation">,</span> S<span class="token punctuation">,</span> i<span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">StrCompare</span><span class="token punctuation">(</span>sub<span class="token punctuation">,</span> T<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">++</span>i<span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">return</span> i<span class="token punctuation">;</span> <span class="token comment">//返回子串在主串中的位置</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>          <span class="token comment">//S中不存在与T相同的子串</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="双指针算法" tabindex="-1"><a class="header-anchor" href="#双指针算法" aria-hidden="true">#</a> 双指针算法</h3>
<div class="language-c line-numbers-mode" data-ext="c"><pre v-pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">Index</span><span class="token punctuation">(</span>SString S<span class="token punctuation">,</span> SString T<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span>S<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> j<span class="token operator">&lt;=</span>T<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//跳出循环情况：j>T.length,匹配成功</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>S<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>T<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>			             <span class="token comment">//i>S.length,匹配失败</span>
            <span class="token operator">++</span>i<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">;</span>          <span class="token comment">//继续比较后面的字符</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>				   <span class="token comment">//匹配失败，指针i、j都后退，匹配下一个</span>
            i <span class="token operator">=</span> i<span class="token operator">-</span>j<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span>
            j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>             
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">></span> T<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>          <span class="token comment">//j>T.length,匹配成功</span>
        <span class="token keyword">return</span> i<span class="token operator">-</span>T<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="朴素模式匹配算法的时间复杂度" tabindex="-1"><a class="header-anchor" href="#朴素模式匹配算法的时间复杂度" aria-hidden="true">#</a> 朴素模式匹配算法的时间复杂度：</h3>
<p>设主串长度为n，模式串长度为m，则</p>
<p>最好情况：每次匹配第一个字符就匹配失败，直到最后才匹配成功，循环n次，<code v-pre>最好时间复杂度</code>=O(n)</p>
<p>最坏情况：到最后也没找到，主串移动n个元素，模式串移动m个元素，<code v-pre>最坏时间复杂度</code>=O(mn)</p>
<h2 id="_3-3-2-kmp算法" tabindex="-1"><a class="header-anchor" href="#_3-3-2-kmp算法" aria-hidden="true">#</a> 3.3.2 KMP算法</h2>
<p>精髓：利用好已经匹配过的模式串信息，建立一个next数组，表示j的回溯</p>
<div class="language-c line-numbers-mode" data-ext="c"><pre v-pre class="language-c"><code><span class="token keyword">int</span> <span class="token function">Index</span><span class="token punctuation">(</span>SString S<span class="token punctuation">,</span> SString T<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span>S<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> j<span class="token operator">&lt;=</span>T<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//跳出循环情况：j>T.length,匹配成功</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>S<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span>T<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>			             <span class="token comment">//i>S.length,匹配失败</span>
            <span class="token operator">++</span>i<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">;</span>          <span class="token comment">//继续比较后面的字符</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>				   <span class="token comment">//匹配失败，指针i不变，j后退，匹配下一个</span>
            j<span class="token operator">=</span>next<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">></span> T<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>          <span class="token comment">//j>T.length,匹配成功</span>
        <span class="token keyword">return</span> i<span class="token operator">-</span>T<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="kmp算法的时间复杂度" tabindex="-1"><a class="header-anchor" href="#kmp算法的时间复杂度" aria-hidden="true">#</a> KMP算法的时间复杂度：</h3>
<p>设主串长度为n，模式串长度为m，则</p>
<p>最好情况：每次匹配第一个字符就匹配失败，直到最后才匹配成功，循环n次，<code v-pre>最好时间复杂度</code>=O(n)</p>
<p>最坏情况：到最后也没找到，主串移动n个元素，模式串移动m个元素，<code v-pre>最坏时间复杂度</code>=O(m+n)</p>
<h3 id="next数组的建立" tabindex="-1"><a class="header-anchor" href="#next数组的建立" aria-hidden="true">#</a> next数组的建立</h3>
<p>P[0 ~ k-1] == P[j-k ~ j-1]</p>
<figure><img src="/images/datastruct/17084056-66930855432b4357bafbf8d6c76c1840.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure>
<div class="language-c line-numbers-mode" data-ext="c"><pre v-pre class="language-c"><code><span class="token comment">//next数组的建立</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getNext</span><span class="token punctuation">(</span>String ps<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> p <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> next <span class="token operator">=</span> new <span class="token keyword">int</span><span class="token punctuation">[</span>p<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
    next<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> p<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
    	<span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> p<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            next<span class="token punctuation">[</span><span class="token operator">++</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>k<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            k <span class="token operator">=</span> next<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


